// AF3a_pacient - dying pacient
// -------------------------------------------------------------------------------------------------------------

block{
  FRAME me; 			FRM_GetMyFrame(me);
  SetAlarmType(1023, false);
}

// -------------------------------------------------------------------------------------------------------------

OnDeath(){
  FRM_RotateY(me, 180, 180);
  Delay(1000);
  EndScript();
}

Whenever inrange (_PlayerInRange(30)){
  SetWhenever(notinrange, true);
  HUMAN_Suspend(false);
  goto END;
}

Whenever notinrange (_PlayerInRange(30)){
  SetWhenever(inrange, true); 
  HUMAN_Suspend(false);
  goto END;
}

// -------------------------------------------------------------------------------------------------------------

HUMAN_SetMode_Lie();
Delay(1000);
HUMAN_SetAnim("%%zraneni", 300, 300, true);
HUMAN_SetOptimized(1);

Label END: