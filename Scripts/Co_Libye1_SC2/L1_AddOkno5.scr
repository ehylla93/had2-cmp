///////////////////////////////////////////////////////////////////////////////////////////////
//	AddOkno 5 - otevira si Random okno ....
//	Vytvoril:		Radek
//	Zodpovida:		Radek
//	Zasahy jinyh lidi: 	-
/////////////////////////////////////////////////////////////////////////////////////////////// 

Block
{
  integer AIEvent;
  integer RND = 0;
  frame turn;		FRM_FindFrame(turn, "dummy_AddOkno5_see");
  frame Dvere1;	FRM_FindFrame(Dvere1, "okenice_p_12");
  frame Dvere2;	FRM_FindFrame(Dvere2, "okenice_p_14");
  frame Dvere3;	FRM_FindFrame(Dvere3, "okenice_p_13");
  frame Dvere4;	FRM_FindFrame(Dvere4, "okenice_p_11");
  frame JeTu;		FRM_FindFrame(JeTu, "dummy_detektor_okno5");
  SetAlarmType(1023, False);	
}
HUMAN_Suspend(True);	


Whenever AKTIVACE ( _PlayerInBox(JeTu) )
{
  PrintfNumber("OOOKKKNNNOOO 555555555555  .....", RND);
  If (RND != 3) { goto TheEnd;}
  HUMAN_Suspend(False);
  HUMAN_SETMODE_Stand();
  HUMAN_SETAIMODE_Defensive();
  RND = _RandomInt(2);
  If (RND == 1) 
  {
    HUMAN_Move("AddOkno5_1");
    SetActorState(Dvere1, 1);
    SetActorState(Dvere2, 1);
  } else {
    HUMAN_Move("AddOkno5_2");
    SetActorState(Dvere3, 1);
    SetActorState(Dvere4, 1);
  }
  SetAlarmType(1023, True);	
  Goto TheEnd;
}
SetWheneverTime(AKTIVACE, 10000);


OnAlarm()
{
  Block
   {     
     DisableWhenevers(true);
     AIEvent =_GetAlarmType(); 
     PrintfNumber(" --- AddOkno 5 --- ma alarm: ", AIEvent);	
   }
  HUMAN_SetSniper(true, 5);
  EndScript();
}


OnAlarmDone()
{
  SetAlarmType(1023, True);
  HUMAN_SetAlarm(False);
  HUMAN_SetOptimized(2);
  HUMAN_SETMODE_Stand();
//  HUMAN_TurnAt(turn); 	// NE!
  HUMAN_TurnAt(JeTu); 	// ale sem!
  Goto TotalEnd;
}

label TheEnd:
  RND = _RandomInt(3) +1;
  Delay(10000);
  SetWhenever(AKTIVACE, True);

label TotalEnd: